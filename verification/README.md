# Contract Verification Files

This folder contains all necessary files for manually verifying the SmartCoin contract on Basescan (or other EVM explorers).

## Files in This Directory

### 1. **SmartCoin-flattened.sol**
- **Purpose**: Single-file version of the contract with all dependencies inlined
- **Use**: Upload this file when using the "Solidity (Single file)" verification method
- **Size**: ~900 lines (includes all OpenZeppelin contracts)
- **How to regenerate**: 
  ```bash
  forge flatten src/Smart.sol > verification/SmartCoin-flattened.sol
  ```

### 2. **standard-input.json**
- **Purpose**: Standard JSON input format for Solidity compiler
- **Use**: Upload this when using the "Solidity (Standard-Json-Input)" verification method
- **Contains**: Compiler settings, optimizer config, EVM version, remappings
- **More flexible**: Allows the explorer to compile from source structure

### 3. **SmartCoin-metadata.json**
- **Purpose**: Complete compilation metadata including ABI, bytecode, and source mappings
- **Use**: Reference file for debugging and advanced verification
- **Generated by**: Solidity compiler during build process

---

## How to Verify on Basescan

### Option 1: Using Flattened Source (Easiest)

**Go to your deployed contract on Basescan:**
- Sepolia: `https://sepolia.basescan.org/address/YOUR_CONTRACT_ADDRESS#code`
- Mainnet: `https://basescan.org/address/YOUR_CONTRACT_ADDRESS#code`

**Click "Verify and Publish" and enter:**

| Setting | Value |
|---------|-------|
| Compiler Type | Solidity (Single file) |
| Compiler Version | v0.8.27+commit.40a35a09 |
| Open Source License | MIT License (MIT) |
| **Optimization** | **Yes** |
| **Optimizer Runs** | **200** |
| **EVM Version** | **cancun** |

**Upload/Paste:**
- Upload `SmartCoin-flattened.sol` or paste its contents

**Constructor Arguments:**
```bash
# For 1000 initial tokens:
cast abi-encode "constructor(uint256)" 1000
# Result: 0x00000000000000000000000000000000000000000000000000000000000003e8
```

---

### Option 2: Using Standard JSON Input (Advanced)

**Go to your deployed contract on Basescan**

**Click "Verify and Publish" and select:**
- Compiler Type: **Solidity (Standard-Json-Input)**
- Compiler Version: **v0.8.27+commit.40a35a09**
- License: **MIT License (MIT)**

**Upload:**
- Upload `standard-input.json`

**Constructor Arguments:**
- Same as Option 1

---

### Option 3: Using Forge Verify (CLI)

If the Foundry verification is working with Etherscan V2 API:

```bash
forge verify-contract YOUR_CONTRACT_ADDRESS \
  src/Smart.sol:SmartCoin \
  --chain-id 84532 \
  --constructor-args $(cast abi-encode "constructor(uint256)" 1000) \
  --watch
```

---

## Compiler Settings Reference

These settings **must match exactly** for successful verification:

```json
{
  "compiler": "v0.8.27+commit.40a35a09",
  "optimization": true,
  "optimizer_runs": 200,
  "evm_version": "cancun",
  "license": "MIT"
}
```

---

## Constructor Arguments

The SmartCoin contract takes one parameter: `initialSupply` (uint256)

### Generate Constructor Args:

```bash
# For 1000 tokens
cast abi-encode "constructor(uint256)" 1000

# For 10000 tokens
cast abi-encode "constructor(uint256)" 10000

# For any amount
cast abi-encode "constructor(uint256)" YOUR_AMOUNT
```

### Constructor Args Table:

| Initial Supply | ABI-Encoded Constructor Args |
|----------------|------------------------------|
| 1000 | `0x00000000000000000000000000000000000000000000000000000000000003e8` |
| 5000 | `0x0000000000000000000000000000000000000000000000000000000000001388` |
| 10000 | `0x0000000000000000000000000000000000000000000000000000000000002710` |

---

## Verification Checklist

Before submitting verification:

- [ ] Correct compiler version selected (`v0.8.27+commit.40a35a09`)
- [ ] Optimization enabled (`Yes`)
- [ ] Optimizer runs set to `200`
- [ ] EVM version set to `cancun`
- [ ] License set to `MIT`
- [ ] Constructor arguments match deployment
- [ ] Using correct file (flattened or standard JSON)

---

## Troubleshooting

### "Bytecode does not match"
- ✅ Double-check compiler version is exact
- ✅ Verify optimization is enabled with 200 runs
- ✅ Confirm EVM version is "cancun"
- ✅ Ensure constructor args match deployment

### "Compilation failed"
- ✅ Use the flattened source file
- ✅ Check for encoding issues (UTF-8)
- ✅ Verify the entire file was copied/uploaded

### "Invalid constructor arguments"
- ✅ Use `cast abi-encode` to generate args
- ✅ Ensure you're using the same initial supply from deployment
- ✅ Constructor args must start with `0x`

---

## Contract Information

**Contract Name:** SmartCoin  
**Token Name:** Smart Coin  
**Symbol:** SMART  
**Decimals:** 0 (whole tokens only)  
**License:** MIT

**Deployed Networks:**
- Base Sepolia (Testnet)
- Base Mainnet

---

## Regenerating Files

If you need to regenerate these files after modifying the contract:

```bash
# Regenerate flattened source
forge flatten src/Smart.sol > verification/SmartCoin-flattened.sol

# Rebuild and regenerate metadata
forge build --force
forge inspect SmartCoin metadata > verification/SmartCoin-metadata.json
```

---

## Useful Links

- [Foundry Documentation](https://book.getfoundry.sh/)
- [Basescan Verification Guide](https://docs.basescan.org/getting-started/verifying-contracts)
- [Etherscan V2 API Migration](https://docs.etherscan.io/v2-migration)
- [Base Network Docs](https://docs.base.org/)

---

*Last Updated: October 2025*

